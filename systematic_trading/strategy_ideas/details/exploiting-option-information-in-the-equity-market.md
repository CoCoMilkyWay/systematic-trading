<div align="center">
  <h1>Exploiting Option Information in the Equity Market</h1>
</div>

## Original paper

ðŸ“• [Paper](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2001461)

## Trading rules

- Investment universe: 100 largest stocks from NYSE, AMEX, NASDAQ exchanges
- Weekly options selection: Approximately one month to maturity
- Option categorization: ATM (strike price/stock price ratio 0.95-1.05), OTM (put option ratio 0.80-0.95)
- Choose options closest to 1.00 (ATM) or 0.95 (OTM) moneyness when multiple options apply
- Measure 1: OTM volatility skew (difference between implied volatility of OTM put and ATM call)
- Measure 2: Realized vs.Â implied volatility spread (difference between past 20-day realized volatility and implied volatility)
- Measure 3: ATM volatility skew (difference between implied volatility of ATM put and call options)
- Measure 4: Change in ATM volatility skew (weekly change in ATM put and call optionsâ€™ implied volatilities)
- Calculate cross-sectional standardized scores (z-scores) for each measure
- Compute combined z-score as the average of all 4 standardized variables
- Rank stocks into quintile portfolios; go long on top quintile, short on bottom quintile
- Summary indicator calculation: Every Tuesday
- One-day lag between strategy signals and portfolio construction; stocks bought at Wednesdayâ€™s closing prices
- Weekly rebalancing; equal-weighted stocks

## Statistics

- **Markets Traded:** Equities
- **Period of Rebalancing:** Weekly
- **Backtest period:** 1996-2009
- **Annual Return:** 7.61%
- **Maximum Drawdown:** N/A
- **Sharpe Ratio:** 0.54
- **Annual Standard Deviation:** 6.69%

## Python code

### Backtrader

```python
import backtrader as bt
import numpy as np
import pandas as pd
from scipy.stats import zscore

class OptionTradingStrategy(bt.Strategy):
    def __init__(self):
        self.weekday = 1  # Tuesday
        self.lag = 1

    def next(self):
        if len(self.data) < 20:
            return

        if self.data.datetime.date(0).weekday() != self.weekday:
            return

        positions = []

        for data in self.datas:
            # Calculate measures
            otm_vol_skew = data.otm_put_iv - data.atm_call_iv
            realized_vol = bt.ind.StdDev(data.close, period=20) * np.sqrt(252)
            rv_iv_spread = realized_vol - ((data.atm_put_iv + data.atm_call_iv) / 2)
            atm_vol_skew = data.atm_put_iv - data.atm_call_iv
            atm_vol_skew_change = data.atm_put_iv[0] - data.atm_put_iv[-5]
            
            measures = [otm_vol_skew, rv_iv_spread, atm_vol_skew, atm_vol_skew_change]
            z_scores = zscore(measures)
            combined_z_score = np.mean(z_scores)
            
            positions.append((data, combined_z_score))

        sorted_positions = sorted(positions, key=lambda x: x[1], reverse=True)
        long_stocks = sorted_positions[:len(sorted_positions) // 5]
        short_stocks = sorted_positions[-len(sorted_positions) // 5:]

        for data, z_score in long_stocks:
            self.order_target_percent(data, target=1 / len(long_stocks))

        for data, z_score in short_stocks:
            self.order_target_percent(data, target=-1 / len(short_stocks))

        # Close positions not in long_stocks or short_stocks
        for data in self.datas:
            if data not in [d for d, _ in long_stocks + short_stocks]:
                self.order_target_percent(data, target=0)

if __name__ == '__main__':
    cerebro = bt.Cerebro()
    cerebro.addstrategy(OptionTradingStrategy)

    # Add data feeds for the 100 largest stocks from NYSE, AMEX, NASDAQ exchanges
    # Data feeds should include necessary option data (e.g., implied volatilities)

    cerebro.run()
```